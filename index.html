<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Mausritter Character Sheet</title>
    <link rel="icon" type="image/x-icon" href="favicon\favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Germania+One&family=PT+Sans+Narrow:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script>
        if (localStorage.getItem('dark-mode') === 'on') {
            document.documentElement.classList.add('invert-dark');
            document.body && document.body.classList.add('invert-dark');
        }
    </script>
</head>

<body class="flex items-center justify-center min-h-screen bg-gray-100 font-pt-sans-narrow">
    <div class="w-[210mm] h-[297mm] bg-white shadow-lg p-8">
        <div class="flex w-full gap-6">
            <!-- Left Column -->
            <div class="w-3/5 flex flex-col gap-6">
                <!-- Name & Background -->
                <div class="bg-white rounded-xl shadow-md border border-black p-4">
                    <div class="flex items-center pb-4">
                        <label
                            class="w-1/3 font-extrabold text-gray-700 text-3xl tracking-tight font-germania">Name</label>
                        <input type="text" id="character-name" placeholder="Enter name"
                            class="shrink-on-overflow w-2/3 bg-transparent border-none p-0 text-xl focus:outline-none my-auto" />
                    </div>
                    <div class="border-t-2 border-black"></div>
                    <div class="flex items-center pt-4">
                        <label class="w-1/3 font-semibold text-gray-700 font-germania">Background</label>
                        <input type="text" id="character-background" placeholder="Enter background"
                            class="shrink-on-overflow w-2/3 bg-transparent border-none p-0 focus:outline-none" />
                    </div>
                </div>
                <!-- Description -->
                <div class="bg-white p-0 rounded-xl">
                    <table class="table-auto w-full">
                        <tbody>
                            <tr>
                                <td class="pb-2 font-semibold text-gray-700 text-center">Description</td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea id="character-description" rows="8"
                                        class="w-full px-4 py-3 text-base rounded-md resize-none"
                                        placeholder="Enter description..."></textarea>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- Inventory Label -->
                <div class="flex justify-between items-center mb-2">
                    <label class="font-semibold text-gray-700 text-xl mt-2 font-germania">Inventory</label>
                </div>
            </div>
            <!-- Right Column -->
            <div class="w-2/5 flex flex-col gap-6">
                <!-- Info -->
                <div class="bg-white p-2 rounded-xl">
                    <table class="table-auto w-full">
                        <tbody>
                            <tr>
                                <td class="pr-4 py-2 font-semibold text-gray-700 text-sm">Birthsign</td>
                                <td>
                                    <input type="text" id="character-birthsign"
                                        class="shrink-on-overflow w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm"
                                        placeholder="Enter birthsign">
                                </td>
                            </tr>
                            <tr>
                                <td class="pr-4 py-2 font-semibold text-gray-700 text-sm">Coat</td>
                                <td>
                                    <input type="text" id="character-coat"
                                        class="shrink-on-overflow w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm"
                                        placeholder="Enter coat">
                                </td>
                            </tr>
                            <tr>
                                <td class="pr-4 py-2 font-semibold text-gray-700 text-sm">Look</td>
                                <td>
                                    <input type="text" id="character-look"
                                        class="shrink-on-overflow w-full px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm"
                                        placeholder="Enter look">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- Stats Table -->
                <table class="table-auto w-full text-center border-collapse">
                    <tbody>
                        <tr>
                            <td
                                class="font-semibold text-gray-700 py-2 bg-gray-200 border border-black w-1/3 font-germania">
                                STR</td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-str-max"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-str-current"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                        </tr>
                        <tr>
                            <td
                                class="font-semibold text-gray-700 py-2 bg-gray-200 border border-black w-1/3 font-germania">
                                DEX</td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-dex-max"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-dex-current"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                        </tr>
                        <tr>
                            <td
                                class="font-semibold text-gray-700 py-2 bg-gray-200 border border-black w-1/3 font-germania">
                                WIL</td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-wil-max"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-wil-current"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="text-gray-700 font-semibold">
                            <th></th>
                            <th>Max</th>
                            <th>Current</th>
                        </tr>
                    </tfoot>
                </table>
                <!-- HP Table -->
                <table class="table-auto w-full text-center border-collapse mt-4">
                    <tbody>
                        <tr>
                            <td
                                class="font-semibold text-gray-700 py-2 bg-gray-200 border border-black w-1/3 font-germania">
                                HP</td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-hp-max"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                            <td class="border border-black w-1/3"><input type="number" id="stat-hp-current"
                                    class="w-16 px-2 py-1 border border-gray-300 rounded-md text-center" /></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="text-gray-700 font-semibold">
                            <th></th>
                            <th>Max</th>
                            <th>Current</th>
                        </tr>
                    </tfoot>
                </table>
                <!-- Pips Table -->
                <table class="table-auto text-center border-collapse">
                    <tbody>
                        <tr>
                            <td class="font-semibold text-gray-700 py-1 bg-gray-200 border border-black w-24">Pips</td>
                            <td class="border border-black w-24"><input type="number" id="pips-amount"
                                    class="w-16 px-2 py-0.5 border border-gray-300 rounded-md text-center" /></td>
                            <td class="border border-black w-24">250</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Inventory Grid -->
        <div class="grid grid-cols-5 gap-0 mt-4" id="inventory-grid">
            <div class="inventory-slot w-36 h-36 border border-gray-300 border-dotted flex items-center justify-center font-germania"
                data-slot="0" data-row="0" data-col="0" data-label="Main paw">Main paw</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 border-dotted flex items-center justify-center font-germania"
                data-slot="1" data-row="0" data-col="1" data-label="Body">Body</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 bg-gray-100 flex items-center justify-center font-germania"
                data-slot="2" data-row="0" data-col="2" data-label="1">1</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 bg-gray-100 flex items-center justify-center font-germania"
                data-slot="3" data-row="0" data-col="3" data-label="2">2</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 bg-gray-100 flex items-center justify-center font-germania"
                data-slot="4" data-row="0" data-col="4" data-label="3">3</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 border-dotted flex items-center justify-center font-germania"
                data-slot="5" data-row="1" data-col="0" data-label="Off paw">Off paw</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 border-dotted flex items-center justify-center font-germania"
                data-slot="6" data-row="1" data-col="1" data-label="Body">Body</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 bg-gray-100 flex items-center justify-center font-germania"
                data-slot="7" data-row="1" data-col="2" data-label="4">4</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 bg-gray-100 flex items-center justify-center font-germania"
                data-slot="8" data-row="1" data-col="3" data-label="5">5</div>
            <div class="inventory-slot w-36 h-36 border border-gray-300 bg-gray-100 flex items-center justify-center font-germania"
                data-slot="9" data-row="1" data-col="4" data-label="6">6</div>
        </div>
        <!-- Inventory Tips -->
        <div class="grid grid-cols-5 gap-0 mb-2 text-xs text-gray-600 font-pt-sans-narrow font-semibold select-none">
            <div></div>
            <div></div>
            <div class="col-span-1"></div>
            <div class="col-span-1"></div>
            <div class="col-span-1"></div>
            <div class="text-center mt-1">Carried: Ready to use.</div>
            <div class="text-center mt-1">Worn: Quick to ready.</div>
            <div class="text-center mt-1 col-span-3">Pack: Takes time to ready. During combat, requires an action to
                retrieve.</div>
        </div>
        <!-- Stats Containers -->
        <div class="flex gap-4 mt-4 items-start">
            <!-- Level and XP -->
            <div class="w-1/5 border border-gray-300 p-4 rounded-md flex flex-col items-center">
                <div class="grid grid-cols-1 gap-2 w-full">
                    <div class="border border-gray-300 p-2 rounded">
                        <div class="font-semibold text-gray-700 font-germania">Level</div>
                        <input type="number" id="character-level"
                            class="w-full px-2 py-1 border border-gray-300 rounded-md text-center" />
                    </div>
                    <div class="border border-gray-300 p-2 rounded">
                        <div class="font-semibold text-gray-700">XP</div>
                        <input type="number" id="character-xp"
                            class="w-full px-2 py-1 border border-gray-300 rounded-md text-center" />
                    </div>
                </div>
                <div class="text-xs text-gray-600 font-pt-sans-narrow mt-2 text-center w-full">
                    Recovered treasure &gt; XP
                </div>
            </div>
            <!-- Grit and Ignored -->
            <div class="w-2/5 border border-gray-300 p-4 rounded-md flex flex-col items-center">
                <div class="grid grid-cols-1 gap-2 w-full">
                    <div class="border border-gray-300 p-2 rounded">
                        <div class="font-semibold text-gray-700 font-germania">Grit</div>
                        <input type="number" id="character-grit"
                            class="w-full px-2 py-1 border border-gray-300 rounded-md text-center" />
                    </div>
                    <div class="border border-gray-300 p-2 rounded">
                        <div class="font-semibold text-gray-700">Ignored conditions</div>
                        <input type="text" id="ignored-conditions"
                            class="shrink-on-overflow w-full px-2 py-1 border border-gray-300 rounded-md text-center" />
                    </div>
                </div>
                <div class="text-xs text-gray-600 font-pt-sans-narrow mt-2 text-center w-full">
                    Ignore a number of conditions equal to your Grit
                </div>
            </div>
            <!-- Banked Items -->
            <div class="w-2/5 border border-gray-300 p-4 rounded-md">
                <div class="flex justify-between items-center mb-2">
                    <div class="font-semibold text-gray-700">Banked items and pips</div>
                </div>
                <textarea id="banked-items"
                    class="w-full h-36 px-2 py-1 border border-gray-300 rounded-md resize-none"></textarea>
            </div>
        </div>
        <!-- Footer -->
        <div class="mt-6 border-t border-gray-300 pt-2 text-xs text-gray-500 text-center">
            This is a personal project. Original character sheet design ©
            <a href="https://mausritter.com" class="underline hover:text-gray-700" target="_blank">Mausritter</a> by
            Losing Games.
        </div>
    </div>

    <!-- Side Drawer -->
    <div id="drawer"
        class="fixed top-0 right-0 w-[26rem] h-full bg-white shadow-lg transform translate-x-full transition-transform duration-300 z-50 p-8">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold text-gray-800">Create Item</h2>

        </div>
        <form class="grid grid-cols-2 gap-4 mb-4">
            <div class="space-y-2 col-span-2">
                <label for="item-title" class="block text-sm font-medium text-gray-700">Item Name</label>
                <input id="item-title" type="text" placeholder="Enter item name"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="space-y-2">
                <label for="item-usage" class="block text-sm font-medium text-gray-700">Usage Dots</label>
                <input id="item-usage" type="number" placeholder="0-6" min="0" max="6"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="space-y-2">
                <label for="item-extra" class="block text-sm font-medium text-gray-700">Extra Info</label>
                <input id="item-extra" type="text" placeholder="e.g. d6"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="space-y-2">
                <label for="item-type" class="block text-sm font-medium text-gray-700">Type</label>
                <input id="item-type" type="text" placeholder="e.g. Light"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="space-y-2">
                <label for="item-size" class="block text-sm font-medium text-gray-700">Size</label>
                <select id="item-size"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="1x1">1x1 (Normal)</option>
                    <option value="1x2">1x2 (Tall)</option>
                    <option value="2x1">2x1 (Wide)</option>
                    <option value="2x2">2x2 (Massive)</option>
                </select>
            </div>
            <div class="col-span-2">
                <button type="button" onclick="createCustomItem()"
                    class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-150 ease-in-out font-medium">
                    Create Item
                </button>
            </div>
        </form>
        <div id="item-pool" class="mt-6 grid auto-rows-min grid-cols-1 gap-6 overflow-y-auto"></div>
    </div>

    <!-- Toggle Buttons -->
    <button onclick="toggleDrawer()" class="fixed top-4 right-4 z-50 bg-blue-600 text-white px-3 py-1 rounded shadow"
        aria-label="Add Item">
        + Add Item
    </button>
    <button id="dark-toggle" class="fixed top-4 left-4 z-50 bg-gray-800 text-white px-3 py-1 rounded shadow"
        aria-label="Toggle Dark Mode">
        Toggle Dark Mode
    </button>

    <!-- Sheet Selector and Import/Export -->
    <div id="sheet-manager" class="fixed bottom-4 right-4 z-50 flex flex-col items-end gap-2">
        <div class="flex gap-2">
            <select id="sheet-selector" class="px-2 py-1 rounded border border-gray-300 bg-white shadow"></select>
            <button id="sheet-add" class="bg-blue-600 text-white px-2 py-1 rounded shadow" title="New Sheet">+</button>
            <button id="sheet-delete"
                class="bg-red-600 text-white px-1.5 py-1 rounded shadow flex items-center justify-center"
                title="Delete Sheet">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 18 18">
                    <line x1="6" y1="6" x2="12" y2="12" stroke="white" stroke-width="3.5" stroke-linecap="round" />
                    <line x1="12" y1="6" x2="6" y2="12" stroke="white" stroke-width="3.5" stroke-linecap="round" />
                </svg>
            </button>
        </div>
        <div class="flex gap-2 mt-1">
            <button id="sheet-export" class="bg-gray-800 text-white px-2 py-1 rounded shadow"
                title="Export Sheet">Export</button>
            <label class="bg-gray-800 text-white px-2 py-1 rounded shadow cursor-pointer" title="Import Sheet">
                Import
                <input id="sheet-import" type="file" accept=".mcs,application/json" class="hidden" />
            </label>
        </div>
    </div>



    <!-- Ko-fi Widget -->
    <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
    <script>
        kofiWidgetOverlay.draw('ramonafrench', {
            'type': 'floating-chat',
            'floating-chat.donateButton.text': 'Tip Me',
            'floating-chat.donateButton.background-color': '#ffffff',
            'floating-chat.donateButton.text-color': '#323842'
        });
    </script>

    <script src="js/main.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/shrink-input.js"></script>
</body>

</html>